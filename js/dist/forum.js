(()=>{var __webpack_modules__={505(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function safelyEvalAdScript(adPosition,script){try{eval(script)}catch(e){console.group("[hertz/ads] Failed to execute ad script"),console.info('An exception occurred while evaluating the ad script for location "'+adPosition+'".\n\nTo prevent your forum frontend breaking, we caught the error. Please be aware, however, that this may prevent your ads functioning in some cases.'),console.info("The stacktrace will be logged below to help you identify the issue. This may reference the ads extension, but the likelihood that the issue lies in there is extraordinarily miniscule."),console.error(e),console.groupEnd()}}__webpack_require__.d(__webpack_exports__,{A:()=>safelyEvalAdScript})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var t=__webpack_require__.n(e);const r=flarum.core.compat["common/extend"];function a(){var e=function(t){try{window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push({})}catch(r){t<5&&setTimeout(function(){return e(t+1)},1e3)}};e(0)}const o=flarum.core.compat["forum/components/PostStream"];var s=__webpack_require__.n(o),n=__webpack_require__(505);function i(){return t().forum.attribute("canBypassAds")}const c=flarum.core.compat["forum/components/DiscussionPage"];var d=__webpack_require__.n(c);const u=flarum.core.compat["forum/components/DiscussionHero"];var _=__webpack_require__.n(u);const p=flarum.core.compat["forum/components/DiscussionListPane"];var l=__webpack_require__.n(p);const h=flarum.core.compat["common/components/LoadingIndicator"];var f=__webpack_require__.n(h);const b=flarum.core.compat["common/helpers/listItems"];var w=__webpack_require__.n(b);const v=flarum.core.compat["forum/ForumApplication"];var z=__webpack_require__.n(v);const y=flarum.core.compat["forum/components/IndexPage"];var k=__webpack_require__.n(y);t().initializers.add("hertz/ads",function(){var e,o,c,u=t().data["hertz-ads.enabled-ad-locations"]||"[]",p=[];try{p=JSON.parse(u)}catch(e){console.error("[hertz/ads] Failed to parse enabled locations settings.",e),p=[]}p.includes("header")&&(e=t().data["hertz-ads.ad-code.header"],o=t().data["hertz-ads.ad-code.header.js"],c=m.trust(e),(0,r.override)(k().prototype,"hero",function(e){return i()?e():m("[",null,e(),m("div",{align:"center",class:"hertz-ad hertz-ad-header"},c))}),(0,r.extend)(k().prototype,["oncreate","onupdate"],function(e){i()||(a(),(0,n.A)("header",o))})),p.includes("discussion_header")&&function(){var e=t().data["hertz-ads.ad-code.discussion_header"],o=t().data["hertz-ads.ad-code.discussion_header.js"],c=m.trust(e);(0,r.override)(d().prototype,"view",function(e){if(i())return e();var r=this.discussion;return m("div",{className:"DiscussionPage"},m(l(),{state:t().discussions}),m("div",{className:"DiscussionPage-discussion"},r?[_().component({discussion:r}),m("div",{className:"container"},m("nav",{className:"DiscussionPage-nav"},m("ul",null,w()(this.sidebarItems().toArray()))),m("div",{className:"DiscussionPage-stream"},m("div",{class:"hertz-ad hertz-ad-discussion-header",align:"center"},c),s().component({discussion:r,stream:this.stream,onPositionChange:this.positionChanged.bind(this)})))]:m(f(),null)))}),(0,r.extend)(d().prototype,["oncreate","onupdate"],function(e){i()||(a(),(0,n.A)("discussion page header",o))})}(),p.includes("footer")&&function(){var e=t().data["hertz-ads.ad-code.footer"],o=t().data["hertz-ads.ad-code.footer.js"];e&&((0,r.extend)(z().prototype,"mount",function(){if(!i()){var t=document.createElement("footer");t.className="hertz-ad hertz-ad-footer",t.setAttribute("align","center"),t.innerHTML=e;var r=document.querySelector(".App-content");r&&r.append(t)}}),t().history.listen(function(){if(!i()){var t=document.querySelector(".hertz-ad-footer");t&&(t.innerHTML=e,a(),(0,n.A)("footer",o))}}),a())}(),p.includes("between_posts")&&function(){var e=t().data["hertz-ads.ad-code.between_posts"],o=t().data["hertz-ads.ad-code.between_posts.js"],c=m.trust(e);(0,r.override)(s().prototype,"view",function(e){if(i())return e();var r=e().children,a=r.reduce(function(e,a,o){var s=[].concat(e,[a]);return o+1<r.length&&o%(parseInt(t().data["hertz-ads.between-n-posts"])||15)===0&&s.push(m("aside",{key:"hertz-ad-"+o,class:"PostStream-item"},m("div",{class:"hertz-ad hertz-ad-between-posts"},c))),s},[]);return"1"===t().data["hertz-ads.enable-ad-after-placeholder"]&&a.push(m("aside",{key:"hertz-ad-after-placeholder",class:"PostStream-item"},m("div",{class:"hertz-ad hertz-ad-between-posts hertz-ad-between-posts--after-placeholder"},c))),m("div",{className:"PostStream"},a)}),(0,r.extend)(s().prototype,["onupdate","oncreate"],function(e){i()||(a(),(0,n.A)("between posts",o))})}(),p.includes("sidebar")&&function(){var e=t().data["hertz-ads.ad-code.sidebar"],o=t().data["hertz-ads.ad-code.sidebar.js"];if(e){var s=m.trust(e);(0,r.extend)(k().prototype,"sidebarItems",function(e){i()||"tags"===t().current.get("routeName")||window.innerWidth>=768&&e.add("hertz-ads",m("div",{class:"hertz-ad hertz-ad-sidebar"},s),-1e3)}),(0,r.extend)(k().prototype,["oncreate","onupdate"],function(){i()||"tags"===t().current.get("routeName")||document.querySelector(".hertz-ad-sidebar")&&(a(),(0,n.A)("sidebar",o))})}}(),p.includes("discussion_sidebar")&&function(){var e=t().data["hertz-ads.ad-code.discussion_sidebar"],o=t().data["hertz-ads.ad-code.discussion_sidebar.js"];if(e){var s=m.trust(e);document.querySelector(":root").style.setProperty("--hertz-ads--discussion-sidebar-position","36px"),(0,r.extend)(d().prototype,"sidebarItems",function(e){i()||window.innerWidth>=768&&e.add("hertz-ads",m("div",{class:"hertz-ad hertz-ad-discussion-sidebar"},s),1e3)}),(0,r.extend)(d().prototype,["oncreate","onupdate"],function(){i()||document.querySelector(".hertz-ad-discussion-sidebar")&&(a(),(0,n.A)("discussion sidebar",o))})}}()})})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=forum.js.map